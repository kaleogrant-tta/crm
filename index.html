<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Hub — Two Repos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { --fg:#111; --fg2:#555; --line:#e5e7eb; --bg:#fff; }
    * { box-sizing: border-box; }
    body { margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:var(--bg); color:var(--fg); }
    header { position:sticky; top:0; background:#fff; z-index:10; border-bottom:1px solid var(--line); }
    .wrap { max-width:1100px; margin:0 auto; padding:14px 16px; }
    .tabs { display:flex; gap:8px; }
    .tab { padding:10px 14px; border-radius:10px 10px 0 0; border:1px solid var(--line); border-bottom:none; cursor:pointer; user-select:none; }
    .tab.active { background:#f9fafb; font-weight:600; }
    main { max-width:1100px; margin:0 auto; padding:16px; }
    .panel { display:none; }
    .panel.active { display:block; }
    .loading, .error { padding:12px; margin:8px 0; border:1px dashed var(--line); color:var(--fg2); }
    .error { border-color:#fca5a5; color:#b91c1c; background:#fef2f2; }
    article { line-height:1.6; }
    article h1, article h2, article h3 { margin-top:1.25em; }
    pre, code { background:#f6f8fa; }
    pre { padding:12px; overflow:auto; }
    a { color:#0f62fe; text-decoration:none; }
    a:hover { text-decoration:underline; }
    .json-view { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; white-space: pre-wrap; word-break: break-word; background:#f6f8fa; padding:12px; border-radius:8px; border:1px solid var(--line); }
    .src { font-size:12px; color:var(--fg2); margin-top:8px; }
  </style>
  <!-- Lightweight markdown renderer -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="tabs" id="tabs"></div>
    </div>
  </header>

  <main id="panels"></main>

  <script>
    // ===========================
    // EDIT THESE TWO ENTRIES ONLY
    // ===========================
    // Use RAW GitHub URLs. Examples:
    // https://raw.githubusercontent.com/OWNER/REPO/BRANCH/README.md
    // https://raw.githubusercontent.com/OWNER/REPO/BRANCH/path/to/file.json
    const SOURCES = [
      {
        title: "Repo One",
        url: "https://raw.githubusercontent.com/OWNER_ONE/REPO_ONE/BRANCH/README.md"
      },
      {
        title: "Repo Two",
        url: "https://raw.githubusercontent.com/OWNER_TWO/REPO_TWO/BRANCH/README.md"
      }
    ];

    // ===== No edits needed below this line =====

    const tabsEl = document.getElementById("tabs");
    const panelsEl = document.getElementById("panels");

    // Build tabs + panels
    SOURCES.forEach((src, i) => {
      const tab = document.createElement("div");
      tab.className = "tab" + (i === 0 ? " active" : "");
      tab.textContent = src.title || `Tab ${i+1}`;
      tab.dataset.target = `panel-${i}`;
      tabsEl.appendChild(tab);

      const panel = document.createElement("section");
      panel.className = "panel" + (i === 0 ? " active" : "");
      panel.id = `panel-${i}`;
      panel.innerHTML = `
        <div class="loading">Loading <strong>${tab.textContent}</strong>…</div>
        <article class="content"></article>
        <div class="src">Source: <code>${src.url}</code></div>
      `;
      panelsEl.appendChild(panel);
    });

    // Tab behavior
    tabsEl.addEventListener("click", (e) => {
      const t = e.target.closest(".tab");
      if (!t) return;
      document.querySelectorAll(".tab").forEach(el => el.classList.remove("active"));
      document.querySelectorAll(".panel").forEach(el => el.classList.remove("active"));
      t.classList.add("active");
      document.getElementById(t.dataset.target).classList.add("active");
    });

    // Fetch and render each source
    SOURCES.forEach(async (src, i) => {
      const panel = document.getElementById(`panel-${i}`);
      const loading = panel.querySelector(".loading");
      const content = panel.querySelector(".content");
      try {
        const res = await fetch(src.url, { cache: "no-store" });
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const mime = res.headers.get("content-type") || "";

        // Decide renderer by extension or content-type
        const isLikelyJSON = src.url.toLowerCase().endsWith(".json") || mime.includes("application/json");
        const isLikelyMD   = src.url.toLowerCase().endsWith(".md")   || mime.includes("text/plain") || mime.includes("text/markdown");

        const text = await res.text();

        if (isLikelyJSON) {
          // Pretty-print JSON
          try {
            const obj = JSON.parse(text);
            const pretty = JSON.stringify(obj, null, 2);
            content.innerHTML = `<div class="json-view">${escapeHTML(pretty)}</div>`;
          } catch {
            content.innerHTML = renderAsFallback(text);
          }
        } else if (isLikelyMD) {
          content.innerHTML = marked.parse(text);
        } else {
          // Fallback: just show text
          content.innerHTML = renderAsFallback(text);
        }
      } catch (err) {
        content.innerHTML = `<div class="error">Failed to load <code>${src.url}</code><br>${err}</div>`;
      } finally {
        loading?.remove();
      }
    });

    function renderAsFallback(txt) {
      return `<pre>${escapeHTML(txt)}</pre>`;
    }
    function escapeHTML(str) {
      return str.replace(/[&<>"']/g, m => (
        { "&":"&amp;", "<":"&lt;", ">":"&gt;", "\"":"&quot;", "'":"&#39;" }[m]
      ));
    }
  </script>
</body>
</html>
